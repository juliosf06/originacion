{% extends 'reports/base.html' %}

{% load report_tags %}

{% load humanize %}

{% block title %}Seguimiento Prestamo Inmediato{% endblock %}

{% block content %}

          <h1 class="page-header">Seguimiento Prestamo Inmediato</h1>
          <div class="form-inline">
            <input type="hidden" id="csrfmiddlewaretoken" value="{{csrf_token}}">
          </div>
          <div class="rows placeholders">
		<div id="chartContainer" style="height: 300px; width: 100%;"></div>
          </div>
 	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer2" style="height: 300px; width: 100%;"></div>
          </div>
	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer3" style="height: 300px; width: 100%;"></div>
          </div>
	  <!--<div>(*) SE AGREGO LOS PASIVOS A LOS NO PH </div>
<!--	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer4" style="height: 300px; width: 100%;"></div>
          </div>
-->
{% endblock %}

{% block script_final %}
  <script type="text/javascript">
    window.onload = function () {
	var chart = new CanvasJS.Chart("chartContainer", {
		theme: "theme2",//theme1
		title:{
			text: "Formalizados"              
		},
		axisY:{
			interval: 500              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "column",
			name: "Fact M (S/.)",
			indexLabelFontColor: "darkblue",			
			//indexLabel: "{y}",
			yValueFormatString: "#,###.",
			showInLegend: "true",
			dataPoints: [
				{% for a in fact %}
				{ y: {{a.cantidad}}/1000 , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "#Form",
			indexLabelFontColor: "darkblue",			
			indexLabel: "{y}",
			yValueFormatString: "###.",
			showInLegend: "true",
			dataPoints: [
				{% for a in form %}
				{ y: {{a.cantidad}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer2", {
		theme: "theme2",//theme1
		title:{
			text: "Ticket Promedio"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "AVA",
			indexLabelFontColor: "#89D1F3",			
			indexLabel: "{y}",
			yValueFormatString: "##,###",
			showInLegend: "true",
			dataPoints: [
				{% for a in ticket_ava %}
				{ y: {{a.cantidad2}}/{{a.cantidad}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "CAMPAÑAS",
			indexLabelFontColor: "#009EE5",			
			indexLabel: "{y}",
			yValueFormatString: "##,###.",
			showInLegend: "true",
			dataPoints: [
				{% for a in ticket_ms %}
				{ y: {{a.cantidad2}}/{{a.cantidad}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

/*	var chart = new CanvasJS.Chart("chartContainer3", {
		theme: "theme2",//theme1
		title:{
			text: "Rango de ingresos"              
		},
		axisY:{
			includeZero: true              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "[1,000-1,500]",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in rangos1 %}
				{ y: {{a.cantidad}} , label: '{{a.mes_vigencia}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "[1,500-2,000]",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in rangos2 %}
				{ y: {{a.cantidad}} , label: '{{a.mes_vigencia}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "[2,000-2,500]",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in rangos3 %}
				{ y: {{a.cantidad}} , label: '{{a.mes_vigencia}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "[2,500-3,500]",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in rangos4 %}
				{ y: {{a.cantidad}} , label: '{{a.mes_vigencia}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "[3,500-a más>",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in rangos5 %}
				{ y: {{a.cantidad}} , label: '{{a.mes_vigencia}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer4", {
		theme: "theme2",//theme1
		title:{
			text: "Mora Total"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "MORA6",
			indexLabelFontColor: "darkblue",			
			indexLabel: "{y}%",
			yValueFormatString: "##.#",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in mora_6 %}
				{ y: {{a.sum_mora}}*100/{{b.sum_mora}} , label: '{{a.mes_form|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "MORA9",
			indexLabelFontColor: "darkblue",			
			indexLabel: "{y}%",
			color: "#094FA4",
			yValueFormatString: "##.#",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in mora_9 %}
				{ y: {{a.sum_mora}}*100/{{b.sum_mora}} , label: '{{a.mes_form|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "MORA12",
			indexLabelFontColor: "darkblue",			
			indexLabel: "{y}%",
			color: "#86C82D",
			yValueFormatString: "##.#",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in mora_12 %}
				{ y: {{a.sum_mora}}*100/{{b.sum_mora}} , label: '{{a.mes_form|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();*/

    }
  </script>
{% endblock %}

