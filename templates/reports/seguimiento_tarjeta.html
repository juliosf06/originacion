{% extends 'reports/base.html' %}

{% load report_tags %}

{% load humanize %}

{% block title %}Seguimiento Tarjeta{% endblock %}

{% block content %}

          <h1 class="page-header">Seguimiento Tarjeta</h1>
          <div class="form-inline">
            <input type="hidden" id="csrfmiddlewaretoken" value="{{csrf_token}}">
          </div>
          <div class="rows placeholders">
		<div id="chartContainer" style="height: 300px; width: 100%;"></div>
          </div>
	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer2" style="height: 300px; width: 100%;"></div>
          </div>
	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer3" style="height: 300px; width: 100%;"></div>
          </div>
	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer4" style="height: 300px; width: 100%;"></div>
          </div>
	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer10" style="height: 300px; width: 100%;"></div>
          </div>
	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer6" style="height: 300px; width: 50%; display: inline-block;"></div>
		<div id="chartContainer7" style="height: 300px; width: 50%; display: inline-block;"></div>
          </div>
	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer8" style="height: 300px; width: 50%; display: inline-block;"></div>
		<div id="chartContainer9" style="height: 300px; width: 50%; display: inline-block;"></div>
          </div>
	  &nbsp;
          <div class="rows placeholders">
		<div id="chartContainer5" style="height: 300px; width: 100%;"></div>
          </div>


{% endblock %}

{% block script_final %}
  <script type="text/javascript">
    window.onload = function () {
	var chart = new CanvasJS.Chart("chartContainer", {
		theme: "theme2",//theme1
		title:{
			text: "Formalizados",             
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "UNO A UNO",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d in formalizados %}
				{ y: {{b.formalizado}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "CAMPAÑA FAST",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d in formalizados %}
				{ y: {{c.formalizado}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "CAMPAÑA REGULAR",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			color: "#86C82D",
			dataPoints: [
				{% for a,b,c,d in formalizados %}
				{ y: {{d.formalizado}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "# FORMALIZADOS",
			indexLabelFontColor: "darkblue",			
			color: "#094FA4",
			indexLabel: "{y}",
			//percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d in formalizados %}
				{ y: {{a.formalizado}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart2 = new CanvasJS.Chart("chartContainer2", {
		theme: "theme2",//theme1
		title:{
			text: "Ticket Promedio"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "UNO A UNO",
			indexLabelFontColor: "#89D1F3",			
			indexLabel: "{y}",
			yValueFormatString: "##,###",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d in ticket %}
				{ y: {{a.facturacion}}*1000000/{{c.formalizado}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "CAMPAÑAS",
			indexLabelFontColor: "#009EE5",			
			//indexLabel: "{y}",
			yValueFormatString: "##,###.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d in ticket %}
				{ y: {{b.facturacion}}*1000000/{{d.formalizado}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart2.render();
	$("#show1").click(function () {
	chart2.options.data[0].indexLabel = "{y}";
	chart2.options.data[1].indexLabel = "";
        chart2.render();
	});
	chart2.render();
	$("#show2").click(function () {
	chart2.options.data[0].indexLabel = "";
	chart2.options.data[1].indexLabel = "{y}";
        chart2.render();
	});

	var chart = new CanvasJS.Chart("chartContainer3", {
		theme: "theme2",//theme1
		title:{
			text: "Segmentos"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "AVA",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d,e in camp_seg %}
				{ y: {{a.seg}} , label: '{{a.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "MS",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d,e in camp_seg %}
				{ y: {{b.seg}} , label: '{{b.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "Pasivo",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for i in seg_pas %}
				{ y: {{i.seg}} , label: '{{i.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "No PH",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d,e in camp_seg %}
				{ y: {{c.seg}} , label: '{{c.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "stackedColumn",
			name: "NoCli",
			indexLabelFontColor: "white",			
			indexLabel: "#percent%",
			percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d,e in camp_seg %}
				{ y: {{d.seg}} , label: '{{d.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "scatter",
			name: "# Formalizados (Miles)",
			indexLabelFontColor: "darkblue",			
			indexLabel: "{y}",
			//percentFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for a,b,c,d,e in camp_seg %}
				{ y: {{e.formalizado}} , label: '{{d.mes_vigencia|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer4", {
		theme: "theme2",//theme1
		title:{
			text: "Mora Total"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "MORA6",
			indexLabelFontColor: "darkblue",			
			indexLabel: "{y}%",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in mora_6 %}
				{ y: {{a.sum_mora}}*100/{{b.sum_mora}} , label: '{{a.mes_form|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "MORA9",
			indexLabelFontColor: "darkblue",			
			indexLabel: "{y}%",
			color: "#094FA4",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in mora_9 %}
				{ y: {{a.sum_mora}}*100/{{b.sum_mora}} , label: '{{a.mes_form|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "MORA12",
			indexLabelFontColor: "darkblue",			
			indexLabel: "{y}%",
			color: "#86C82D",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for a,b in mora_12 %}
				{ y: {{a.sum_mora}}*100/{{b.sum_mora}} , label: '{{a.mes_form|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer5", {
		theme: "theme2",//theme1
		title:{
			text: "Nivel de Forzaje"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "column",
			name: "Duda",
			//indexLabelFontColor: "darkblue",			
			indexLabel: "{y}%",
			color: "#89D1F3",
			yValueFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in duda_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "column",
			name: "Rechazo",
			//indexLabelFontColor: "darkblue",			
			indexLabel: "{y}%",
			color: "#F6891E",
			yValueFormatString: "#0.",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in rechazo_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer6", {
		theme: "theme2",//theme1
		title:{
			text: "Mora - Segmento AVA"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 6",
			indexLabel: "{y}%",
			indexLabelFontColor: "#89D1F3",
			color: "#89D1F3",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in ava_mora6_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 9",
			indexLabel: "{y}%",
			indexLabelFontColor: "#094FA4",
			color: "#094FA4",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in ava_mora9_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 12",
			indexLabel: "{y}%",
			indexLabelFontColor: "#86C82D",
			color: "#86C82D",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in ava_mora12_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer7", {
		theme: "theme2",//theme1
		title:{
			text: "Mora - Segmento MS"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 6",
			indexLabel: "{y}%",
			indexLabelFontColor: "#89D1F3",
			color: "#89D1F3",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in ms_mora6_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 9",
			indexLabel: "{y}%",
			indexLabelFontColor: "#094FA4",
			color: "#094FA4",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in ms_mora9_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 12",
			indexLabel: "{y}%",
			indexLabelFontColor: "#86C82D",
			color: "#86C82D",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in ms_mora12_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer8", {
		theme: "theme2",//theme1
		title:{
			text: "Mora - Segmento NoPH"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 6",
			indexLabel: "{y}%",
			indexLabelFontColor: "#89D1F3",
			color: "#89D1F3",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in noph_mora6_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 9",
			indexLabel: "{y}%",
			indexLabelFontColor: "#094FA4",
			color: "#094FA4",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in noph_mora9_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 12",
			indexLabel: "{y}%",
			indexLabelFontColor: "#86C82D",
			color: "#86C82D",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in noph_mora12_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer9", {
		theme: "theme2",//theme1
		title:{
			text: "Mora - Segmento NoCli"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 6",
			indexLabel: "{y}%",
			indexLabelFontColor: "#89D1F3",
			color: "#89D1F3",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in nocli_mora6_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 9",
			indexLabel: "{y}%",
			indexLabelFontColor: "#094FA4",
			color: "#094FA4",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in nocli_mora9_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 12",
			indexLabel: "{y}%",
			indexLabelFontColor: "#86C82D",
			color: "#86C82D",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in nocli_mora12_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

	var chart = new CanvasJS.Chart("chartContainer10", {
		theme: "theme2",//theme1
		title:{
			text: "Mora Campaña"              
		},
		animationEnabled: true,   // change to true
		data: [              
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 6",
			indexLabel: "{y}%",
			indexLabelFontColor: "#89D1F3",
			color: "#89D1F3",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in mora6_camp_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 9",
			indexLabel: "{y}%",
			indexLabelFontColor: "#094FA4",
			color: "#094FA4",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in mora9_camp_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		{
			// Change type to "bar", "area", "spline", "pie",etc.
			type: "spline",
			name: "Mora 12",
			indexLabel: "{y}%",
			indexLabelFontColor: "#86C82D",
			color: "#86C82D",
			yValueFormatString: "#0.#",
			showInLegend: "true",
			dataPoints: [
				{% for key, value in mora12_camp_dict.items|sort %}
				{ y: {{value}} , label: '{{key|convert_date}}' },
				{% endfor %}
			]
		},
		]
	});
	chart.render();

    }
  </script>
{% endblock %}

